<!DOCTYPE html>
<html >

<head>

  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Introduction to Open Data Science</title>
  <meta name="description" content="This is official open data science training for the Ocean Health Index.">
  <meta name="generator" content="bookdown 0.5 and GitBook 2.6.7">

  <meta property="og:title" content="Introduction to Open Data Science" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="This is official open data science training for the Ocean Health Index." />
  <meta name="github-repo" content="ohi-science/data-science-training" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Introduction to Open Data Science" />
  
  <meta name="twitter:description" content="This is official open data science training for the Ocean Health Index." />
  

<meta name="author" content="The Ocean Health Index Team">


<meta name="date" content="2017-11-27">

  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  
  
<link rel="prev" href="data-wrangling-dplyr.html">
<link rel="next" href="programming.html">
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />









<style type="text/css">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
</style>

<link rel="stylesheet" href="lib/css/bootstrap.min.css" type="text/css" />
<link rel="stylesheet" href="lib/css/style.css" type="text/css" />
<link rel="stylesheet" href="lib/css/lesson.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">OHI Data Science Training</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="overview.html"><a href="overview.html"><i class="fa fa-check"></i><b>2</b> Overview</a><ul>
<li class="chapter" data-level="2.1" data-path="overview.html"><a href="overview.html#what-to-expect"><i class="fa fa-check"></i><b>2.1</b> What to expect</a><ul>
<li class="chapter" data-level="2.1.1" data-path="overview.html"><a href="overview.html#tidy-data-workflow"><i class="fa fa-check"></i><b>2.1.1</b> Tidy data workflow</a></li>
</ul></li>
<li class="chapter" data-level="2.2" data-path="overview.html"><a href="overview.html#gapminder-data"><i class="fa fa-check"></i><b>2.2</b> Gapminder data</a></li>
<li class="chapter" data-level="2.3" data-path="overview.html"><a href="overview.html#by-the-end-of-the-course"><i class="fa fa-check"></i><b>2.3</b> By the end of the course…</a></li>
<li class="chapter" data-level="2.4" data-path="overview.html"><a href="overview.html#prerequisites"><i class="fa fa-check"></i><b>2.4</b> Prerequisites</a></li>
<li class="chapter" data-level="2.5" data-path="overview.html"><a href="overview.html#credit"><i class="fa fa-check"></i><b>2.5</b> Credit</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="rstudio.html"><a href="rstudio.html"><i class="fa fa-check"></i><b>3</b> R &amp; RStudio, Rmarkdown</a><ul>
<li class="chapter" data-level="3.1" data-path="overview.html"><a href="overview.html#overview"><i class="fa fa-check"></i><b>3.1</b> Overview</a></li>
<li class="chapter" data-level="3.2" data-path="rstudio.html"><a href="rstudio.html#why-learn-r-with-rstudio"><i class="fa fa-check"></i><b>3.2</b> Why learn R with RStudio</a></li>
<li class="chapter" data-level="3.3" data-path="rstudio.html"><a href="rstudio.html#r-at-the-console-rstudio-goodies"><i class="fa fa-check"></i><b>3.3</b> R at the console, RStudio goodies</a><ul>
<li class="chapter" data-level="3.3.1" data-path="rstudio.html"><a href="rstudio.html#error-messages-are-your-friends"><i class="fa fa-check"></i><b>3.3.1</b> Error messages are your friends</a></li>
<li class="chapter" data-level="3.3.2" data-path="rstudio.html"><a href="rstudio.html#logical-operators-and-expressions"><i class="fa fa-check"></i><b>3.3.2</b> Logical operators and expressions</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="rstudio.html"><a href="rstudio.html#r-functions-help-pages"><i class="fa fa-check"></i><b>3.4</b> R functions, help pages</a><ul>
<li class="chapter" data-level="3.4.1" data-path="rstudio.html"><a href="rstudio.html#your-turn"><i class="fa fa-check"></i><b>3.4.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="3.5" data-path="rstudio.html"><a href="rstudio.html#clearing-the-environment"><i class="fa fa-check"></i><b>3.5</b> Clearing the environment</a><ul>
<li class="chapter" data-level="3.5.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-1"><i class="fa fa-check"></i><b>3.5.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="rstudio.html"><a href="rstudio.html#rmarkdown"><i class="fa fa-check"></i><b>3.6</b> RMarkdown</a><ul>
<li class="chapter" data-level="3.6.1" data-path="rstudio.html"><a href="rstudio.html#your-turn-2"><i class="fa fa-check"></i><b>3.6.1</b> Your Turn</a></li>
</ul></li>
<li class="chapter" data-level="3.7" data-path="rstudio.html"><a href="rstudio.html#troubleshooting"><i class="fa fa-check"></i><b>3.7</b> Troubleshooting</a><ul>
<li class="chapter" data-level="3.7.1" data-path="rstudio.html"><a href="rstudio.html#i-just-entered-a-command-and-nothings-happening"><i class="fa fa-check"></i><b>3.7.1</b> I just entered a command and nothing’s happening</a></li>
<li class="chapter" data-level="3.7.2" data-path="rstudio.html"><a href="rstudio.html#how-do-i-update-rstudio"><i class="fa fa-check"></i><b>3.7.2</b> How do I update RStudio?</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="github.html"><a href="github.html"><i class="fa fa-check"></i><b>4</b> GitHub</a><ul>
<li class="chapter" data-level="4.1" data-path="github.html"><a href="github.html#objectives-resources"><i class="fa fa-check"></i><b>4.1</b> Objectives &amp; Resources</a></li>
<li class="chapter" data-level="4.2" data-path="github.html"><a href="github.html#why-should-scientists-use-github"><i class="fa fa-check"></i><b>4.2</b> Why should scientists use Github?</a><ul>
<li class="chapter" data-level="4.2.1" data-path="github.html"><a href="github.html#what-are-git-and-github"><i class="fa fa-check"></i><b>4.2.1</b> What are Git and Github?</a></li>
<li class="chapter" data-level="4.2.2" data-path="github.html"><a href="github.html#some-github-terminology"><i class="fa fa-check"></i><b>4.2.2</b> Some Github terminology</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="github.html"><a href="github.html#setup-git-github"><i class="fa fa-check"></i><b>4.3</b> Setup Git &amp; GitHub</a></li>
<li class="chapter" data-level="4.4" data-path="github.html"><a href="github.html#create-a-repository-on-github.com"><i class="fa fa-check"></i><b>4.4</b> Create a repository on Github.com</a></li>
<li class="chapter" data-level="4.5" data-path="github.html"><a href="github.html#clone-your-repository-using-rstudio"><i class="fa fa-check"></i><b>4.5</b> Clone your repository using RStudio</a></li>
<li class="chapter" data-level="4.6" data-path="github.html"><a href="github.html#inspect-your-repository"><i class="fa fa-check"></i><b>4.6</b> Inspect your repository</a></li>
<li class="chapter" data-level="4.7" data-path="github.html"><a href="github.html#add-files-to-our-local-repo"><i class="fa fa-check"></i><b>4.7</b> Add files to our local repo</a><ul>
<li class="chapter" data-level="4.7.1" data-path="github.html"><a href="github.html#inspect-what-has-changed"><i class="fa fa-check"></i><b>4.7.1</b> Inspect what has changed</a></li>
</ul></li>
<li class="chapter" data-level="4.8" data-path="github.html"><a href="github.html#sync-from-rstudio-to-github"><i class="fa fa-check"></i><b>4.8</b> Sync from RStudio to GitHub</a><ul>
<li class="chapter" data-level="4.8.1" data-path="github.html"><a href="github.html#pull"><i class="fa fa-check"></i><b>4.8.1</b> Pull</a></li>
<li class="chapter" data-level="4.8.2" data-path="github.html"><a href="github.html#stage"><i class="fa fa-check"></i><b>4.8.2</b> Stage</a></li>
<li class="chapter" data-level="4.8.3" data-path="github.html"><a href="github.html#commit"><i class="fa fa-check"></i><b>4.8.3</b> Commit</a></li>
<li class="chapter" data-level="4.8.4" data-path="github.html"><a href="github.html#push"><i class="fa fa-check"></i><b>4.8.4</b> Push</a></li>
</ul></li>
<li class="chapter" data-level="4.9" data-path="github.html"><a href="github.html#explore-remote-github"><i class="fa fa-check"></i><b>4.9</b> Explore remote Github</a><ul>
<li class="chapter" data-level="4.9.1" data-path="github.html"><a href="github.html#your-turn-3"><i class="fa fa-check"></i><b>4.9.1</b> Your turn!</a></li>
</ul></li>
<li class="chapter" data-level="4.10" data-path="github.html"><a href="github.html#create-a-new-r-markdown-file"><i class="fa fa-check"></i><b>4.10</b> Create a new R Markdown file</a><ul>
<li class="chapter" data-level="4.10.1" data-path="github.html"><a href="github.html#your-turn-4"><i class="fa fa-check"></i><b>4.10.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="4.11" data-path="github.html"><a href="github.html#committing---how-often-tracking-changes-in-your-files"><i class="fa fa-check"></i><b>4.11</b> Committing - how often? Tracking changes in your files</a></li>
<li class="chapter" data-level="4.12" data-path="github.html"><a href="github.html#troubleshooting-1"><i class="fa fa-check"></i><b>4.12</b> Troubleshooting</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html"><i class="fa fa-check"></i><b>5</b> Visualizing: <code id="ggplot2">ggplot2</code></a><ul>
<li class="chapter" data-level="5.1" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#objectives-resources-1"><i class="fa fa-check"></i><b>5.1</b> Objectives &amp; Resources</a><ul>
<li class="chapter" data-level="5.1.1" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#objectives-1"><i class="fa fa-check"></i><b>5.1.1</b> Objectives</a></li>
<li class="chapter" data-level="5.1.2" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#resources-1"><i class="fa fa-check"></i><b>5.1.2</b> Resources</a></li>
</ul></li>
<li class="chapter" data-level="5.2" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#install-our-first-package-tidyverse"><i class="fa fa-check"></i><b>5.2</b> Install our first package: <code>tidyverse</code></a></li>
<li class="chapter" data-level="5.3" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#plotting-with-ggplot2"><i class="fa fa-check"></i><b>5.3</b> Plotting with <strong><code>ggplot2</code></strong></a></li>
<li class="chapter" data-level="5.4" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#data"><i class="fa fa-check"></i><b>5.4</b> Data</a></li>
<li class="chapter" data-level="5.5" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#building-your-plots-iteratively"><i class="fa fa-check"></i><b>5.5</b> Building your plots iteratively</a></li>
<li class="chapter" data-level="5.6" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#faceting"><i class="fa fa-check"></i><b>5.6</b> Faceting</a></li>
<li class="chapter" data-level="5.7" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#ggplot2-themes"><i class="fa fa-check"></i><b>5.7</b> <strong><code>ggplot2</code></strong> themes</a></li>
<li class="chapter" data-level="5.8" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#geometric-objects-geoms"><i class="fa fa-check"></i><b>5.8</b> Geometric objects (geoms)</a></li>
<li class="chapter" data-level="5.9" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#customization"><i class="fa fa-check"></i><b>5.9</b> Customization</a></li>
<li class="chapter" data-level="5.10" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#bar-charts"><i class="fa fa-check"></i><b>5.10</b> Bar charts</a><ul>
<li class="chapter" data-level="5.10.1" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#position-adjustments"><i class="fa fa-check"></i><b>5.10.1</b> Position adjustments</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#arranging-and-exporting-plots"><i class="fa fa-check"></i><b>5.11</b> Arranging and exporting plots</a></li>
<li class="chapter" data-level="5.12" data-path="visualizing-ggplot2.html"><a href="visualizing-ggplot2.html#save-and-push-to-github"><i class="fa fa-check"></i><b>5.12</b> Save and push to GitHub</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html"><i class="fa fa-check"></i><b>6</b> Data Wrangling: <code id="dplyr">dplyr</code></a><ul>
<li class="chapter" data-level="6.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#overview-of-dplyr"><i class="fa fa-check"></i><b>6.1</b> Overview of <code class="objectives">dplyr</code></a></li>
<li class="chapter" data-level="6.2" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#prerequisites-1"><i class="fa fa-check"></i><b>6.2</b> Prerequisites</a></li>
<li class="chapter" data-level="6.3" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#tidy-data"><i class="fa fa-check"></i><b>6.3</b> Tidy Data</a><ul>
<li class="chapter" data-level="6.3.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#setup"><i class="fa fa-check"></i><b>6.3.1</b> Setup</a></li>
<li class="chapter" data-level="6.3.2" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#load-tidyverse-which-has-dplyr-inside"><i class="fa fa-check"></i><b>6.3.2</b> load <code>tidyverse</code> (which has <code>dplyr</code> inside)</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#explore-the-gapminder-data.frame"><i class="fa fa-check"></i><b>6.4</b> Explore the gapminder data.frame</a><ul>
<li class="chapter" data-level="6.4.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#read-data-with-readrread_csv"><i class="fa fa-check"></i><b>6.4.1</b> read data with <code>readr::read_csv()</code></a></li>
<li class="chapter" data-level="6.4.2" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#look-at-the-variables-inside-a-data.frame"><i class="fa fa-check"></i><b>6.4.2</b> Look at the variables inside a data.frame</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#dplyr-basics"><i class="fa fa-check"></i><b>6.5</b> <code>dplyr</code> basics</a></li>
<li class="chapter" data-level="6.6" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#filter-subsets-data-row-wise-observations."><i class="fa fa-check"></i><b>6.6</b> <code>filter()</code> subsets data row-wise (observations).</a></li>
<li class="chapter" data-level="6.7" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#your-turn-5"><i class="fa fa-check"></i><b>6.7</b> Your turn</a><ul>
<li class="chapter" data-level="6.7.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#answer"><i class="fa fa-check"></i><b>6.7.1</b> Answer</a></li>
</ul></li>
<li class="chapter" data-level="6.8" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#meet-the-new-pipe-operator"><i class="fa fa-check"></i><b>6.8</b> Meet the new pipe <code>%&gt;%</code> operator</a></li>
<li class="chapter" data-level="6.9" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#select-subsets-data-column-wise-variables"><i class="fa fa-check"></i><b>6.9</b> <code>select()</code> subsets data column-wise (variables)</a><ul>
<li class="chapter" data-level="6.9.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#revel-in-the-convenience"><i class="fa fa-check"></i><b>6.9.1</b> Revel in the convenience</a></li>
</ul></li>
<li class="chapter" data-level="6.10" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#mutate-adds-new-variables"><i class="fa fa-check"></i><b>6.10</b> <code>mutate()</code> adds new variables</a><ul>
<li class="chapter" data-level="6.10.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#your-turn-6"><i class="fa fa-check"></i><b>6.10.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="6.11" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#group_by-operates-on-groups"><i class="fa fa-check"></i><b>6.11</b> <code>group_by()</code> operates on groups</a><ul>
<li class="chapter" data-level="6.11.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#summarize-with-group_by"><i class="fa fa-check"></i><b>6.11.1</b> <code>summarize()</code> with <code>group_by()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.12" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#arrange-orders-columns"><i class="fa fa-check"></i><b>6.12</b> <code>arrange()</code> orders columns</a><ul>
<li class="chapter" data-level="6.12.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#your-turn-7"><i class="fa fa-check"></i><b>6.12.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="6.13" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#all-together-now"><i class="fa fa-check"></i><b>6.13</b> All together now</a><ul>
<li class="chapter" data-level="6.13.1" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#compare-to-base-r"><i class="fa fa-check"></i><b>6.13.1</b> Compare to base R</a></li>
<li class="chapter" data-level="6.13.2" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#your-turn-8"><i class="fa fa-check"></i><b>6.13.2</b> Your Turn</a></li>
</ul></li>
<li class="chapter" data-level="6.14" data-path="data-wrangling-dplyr.html"><a href="data-wrangling-dplyr.html#key-points"><i class="fa fa-check"></i><b>6.14</b> Key Points</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html"><i class="fa fa-check"></i><b>7</b> Data Wrangling: <code id="tidyr">tidyr</code></a><ul>
<li class="chapter" data-level="7.1" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#overview-1"><i class="fa fa-check"></i><b>7.1</b> Overview</a></li>
<li class="chapter" data-level="7.2" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#tidyr-basics"><i class="fa fa-check"></i><b>7.2</b> <code>tidyr</code> basics</a><ul>
<li class="chapter" data-level="7.2.1" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#setup-1"><i class="fa fa-check"></i><b>7.2.1</b> Setup</a></li>
<li class="chapter" data-level="7.2.2" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#load-tidyverse-which-has-tidyr-inside"><i class="fa fa-check"></i><b>7.2.2</b> load <code>tidyverse</code> (which has <code>tidyr</code> inside)</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#explore-gapminder-data-wide-format."><i class="fa fa-check"></i><b>7.3</b> Explore gapminder data — wide format.</a></li>
<li class="chapter" data-level="7.4" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#gather-data-from-wide-to-long-format"><i class="fa fa-check"></i><b>7.4</b> <code>gather()</code> data from wide to long format</a><ul>
<li class="chapter" data-level="7.4.1" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#your-turn-9"><i class="fa fa-check"></i><b>7.4.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#spread-data-from-long-to-intermediate-format"><i class="fa fa-check"></i><b>7.5</b> <code>spread()</code> data from long to intermediate format</a><ul>
<li class="chapter" data-level="7.5.1" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#your-turn-10"><i class="fa fa-check"></i><b>7.5.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="7.6" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#your-turn-11"><i class="fa fa-check"></i><b>7.6</b> Your turn</a><ul>
<li class="chapter" data-level="7.6.1" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#answer-no-peeking-2"><i class="fa fa-check"></i><b>7.6.1</b> Answer (no peeking)</a></li>
<li class="chapter" data-level="7.6.2" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#clean-up-and-save-your-.rmd"><i class="fa fa-check"></i><b>7.6.2</b> clean up and save your .Rmd</a></li>
<li class="chapter" data-level="7.6.3" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#complete-other-tidyr-awesomeness"><i class="fa fa-check"></i><b>7.6.3</b> <code>complete</code>: other <code>tidyr</code> awesomeness</a></li>
</ul></li>
<li class="chapter" data-level="7.7" data-path="data-wrangling-tidyr.html"><a href="data-wrangling-tidyr.html#other-links"><i class="fa fa-check"></i><b>7.7</b> Other links</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="programming.html"><a href="programming.html"><i class="fa fa-check"></i><b>8</b> Programming in R</a><ul>
<li class="chapter" data-level="8.1" data-path="programming.html"><a href="programming.html#objectives-and-resources"><i class="fa fa-check"></i><b>8.1</b> Objectives and Resources</a></li>
<li class="chapter" data-level="8.2" data-path="programming.html"><a href="programming.html#naming-files"><i class="fa fa-check"></i><b>8.2</b> Naming files</a></li>
<li class="chapter" data-level="8.3" data-path="programming.html"><a href="programming.html#analysis-plan"><i class="fa fa-check"></i><b>8.3</b> Analysis plan</a></li>
<li class="chapter" data-level="8.4" data-path="programming.html"><a href="programming.html#create-an-r-script"><i class="fa fa-check"></i><b>8.4</b> Create an R script</a></li>
<li class="chapter" data-level="8.5" data-path="programming.html"><a href="programming.html#automation-with-for-loops"><i class="fa fa-check"></i><b>8.5</b> Automation with for loops</a><ul>
<li class="chapter" data-level="8.5.1" data-path="programming.html"><a href="programming.html#for-loop-basic-structure"><i class="fa fa-check"></i><b>8.5.1</b> For loop basic structure</a></li>
<li class="chapter" data-level="8.5.2" data-path="programming.html"><a href="programming.html#executable-for-loop"><i class="fa fa-check"></i><b>8.5.2</b> Executable for loop!</a></li>
<li class="chapter" data-level="8.5.3" data-path="programming.html"><a href="programming.html#clean-up-our-repo"><i class="fa fa-check"></i><b>8.5.3</b> Clean up our repo</a></li>
<li class="chapter" data-level="8.5.4" data-path="programming.html"><a href="programming.html#your-turn-12"><i class="fa fa-check"></i><b>8.5.4</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="8.6" data-path="programming.html"><a href="programming.html#conditional-statements-with-if-and-else"><i class="fa fa-check"></i><b>8.6</b> Conditional statements with <code>if</code> and <code>else</code></a><ul>
<li class="chapter" data-level="8.6.1" data-path="programming.html"><a href="programming.html#if-statement-basic-structure"><i class="fa fa-check"></i><b>8.6.1</b> if statement basic structure</a></li>
<li class="chapter" data-level="8.6.2" data-path="programming.html"><a href="programming.html#executable-ifelse-statement"><i class="fa fa-check"></i><b>8.6.2</b> Executable if/else statement</a></li>
</ul></li>
<li class="chapter" data-level="8.7" data-path="programming.html"><a href="programming.html#joining-datasets"><i class="fa fa-check"></i><b>8.7</b> Joining datasets</a><ul>
<li class="chapter" data-level="8.7.1" data-path="programming.html"><a href="programming.html#your-turn-13"><i class="fa fa-check"></i><b>8.7.1</b> Your turn</a></li>
</ul></li>
<li class="chapter" data-level="8.8" data-path="programming.html"><a href="programming.html#more-r"><i class="fa fa-check"></i><b>8.8</b> More R!</a><ul>
<li class="chapter" data-level="8.8.1" data-path="programming.html"><a href="programming.html#importing-and-installing"><i class="fa fa-check"></i><b>8.8.1</b> Importing and Installing</a></li>
<li class="chapter" data-level="8.8.2" data-path="programming.html"><a href="programming.html#organization-and-workflows"><i class="fa fa-check"></i><b>8.8.2</b> Organization and workflows</a></li>
<li class="chapter" data-level="8.8.3" data-path="programming.html"><a href="programming.html#getting-help"><i class="fa fa-check"></i><b>8.8.3</b> Getting help</a></li>
</ul></li>
<li class="chapter" data-level="8.9" data-path="programming.html"><a href="programming.html#ideas-for-extended-analysis-2"><i class="fa fa-check"></i><b>8.9</b> Ideas for Extended Analysis 2</a></li>
</ul></li>
<li class="chapter" data-level="9" data-path="collaborating.html"><a href="collaborating.html"><i class="fa fa-check"></i><b>9</b> Collaborate with GitHub</a><ul>
<li class="chapter" data-level="9.1" data-path="collaborating.html"><a href="collaborating.html#overview-2"><i class="fa fa-check"></i><b>9.1</b> Overview</a></li>
<li class="chapter" data-level="9.2" data-path="collaborating.html"><a href="collaborating.html#create-gh-pages-repo-and-give-someone-permission"><i class="fa fa-check"></i><b>9.2</b> create gh-pages repo and give someone permission</a></li>
<li class="chapter" data-level="9.3" data-path="collaborating.html"><a href="collaborating.html#clone-to-a-new-rproject"><i class="fa fa-check"></i><b>9.3</b> clone to a new Rproject</a></li>
<li class="chapter" data-level="9.4" data-path="collaborating.html"><a href="collaborating.html#rmd-analysis-together"><i class="fa fa-check"></i><b>9.4</b> Rmd analysis together</a></li>
</ul></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Introduction to Open Data Science</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-wrangling-tidyr" class="section level1">
<h1><span class="header-section-number">Chapter 7</span> Data Wrangling: <code id="tidyr">tidyr</code></h1>
<div id="overview-1" class="section level2">
<h2><span class="header-section-number">7.1</span> Overview</h2>
<p>Now you have some experience wrangling and working with tidy data. But we all know that not all data that you have are tidy. So how do we make data more tidy? With <code>tidyr</code>.</p>
<p><strong>Objectives</strong></p>
<ul>
<li>learn <code>tidyr</code> with the <code>gapminder</code> package</li>
<li>other wrangling: joins, binding</li>
<li>practice the RStudio-GitHub workflow</li>
<li>your turn: use the data wrangling cheat sheet to explore window functions</li>
</ul>
<p><strong>Resources</strong></p>
<p>These materials borrow heavily from:</p>
<ul>
<li><a href="http://r4ds.had.co.nz/relational-data">R for Data Science: Relational Data</a></li>
<li><a href="http://r4ds.had.co.nz/tidy-data.html#spreading-and-gathering">R for Data Science: Tidy Data</a></li>
</ul>
</div>
<div id="tidyr-basics" class="section level2">
<h2><span class="header-section-number">7.2</span> <code>tidyr</code> basics</h2>
<p>Often, data must be reshaped for it to become tidy data. What does that mean? There are four main verbs we’ll use, which are essentially pairs of opposites:</p>
<ul>
<li>turn columns into rows (<code>gather()</code>),</li>
<li>turn rows into columns (<code>spread()</code>),</li>
<li>turn a character column into multiple columns (<code>separate()</code>),</li>
<li>turn multiple character columns into a single column (<code>unite()</code>)</li>
</ul>
<div class="figure">
<img src="img/rstudio-cheatsheet-spread-gather-sep-unite.png" />

</div>
<p><br></p>
<p>You use <code>spread()</code> and <code>gather()</code> to transform or reshape data between <em>wide</em> to <em>long</em> formats. <em>long</em> format is the tidy data we are after, where:</p>
<ul>
<li>each column is a variable</li>
<li>each row is an observation</li>
</ul>
<p>In the <em>long</em> format, you usually have 1 column for the observed variable and the other columns are ID variables.</p>
<p>For the <em>wide</em> format each row is often a site/subject/patient and you have multiple observation variables containing the same type of data. These can be either repeated observations over time, or observation of multiple variables (or a mix of both). Data input may be simpler or some other applications may prefer the ‘wide’ format. However, many of <code>R</code>‘s functions have been designed assuming you have ’long’ format data.</p>
<p>These data formats mainly affect readability. For humans, the wide format is often more intuitive since we can often see more of the data on the screen due to it’s shape. However, the long format is more machine readable and is closer to the formatting of databases. The ID variables in our dataframes are similar to the fields in a database and observed variables are like the database values.</p>
<blockquote>
<p>Question: Is gapminder a purely long, purely wide, or some intermediate format?</p>
</blockquote>
<p>Sometimes, as with the gapminder dataset, we have multiple types of observed data. It is somewhere in between the purely ‘long’ and ‘wide’ data formats:</p>
<ul>
<li>3 “ID variables” (<code>continent</code>, <code>country</code>, <code>year</code>)</li>
<li>3 “Observation variables” (<code>pop</code>,<code>lifeExp</code>,<code>gdpPercap</code>).</li>
</ul>
<p>It’s pretty common to have data in this intermediate format in most cases despite not having ALL observations in 1 column, since all 3 observation variables have different units. But we can play with switching it to long format and wide to show what that means (i.e. long would be 4 ID variables and 1 observation variable).</p>
<p><strong>Note:</strong> Generally, mathematical operations are better in long format, although some plotting functions actually work better with wide format.</p>
<div id="setup-1" class="section level3">
<h3><span class="header-section-number">7.2.1</span> Setup</h3>
<p>We’ll work today in RMarkdown. You can either continue from the same RMarkdown as yesterday, or begin a new one.</p>
<p><strong>Here’s what to do:</strong></p>
<ol style="list-style-type: decimal">
<li>Clear your workspace (Session &gt; Restart R)</li>
<li>New File &gt; R Markdown…, save as something other than <code>gapminder-wrangle.Rmd</code> and delete irrelevant info, or just continue using <code>gapminder-wrangle.Rmd</code></li>
</ol>
<p>I’m going to write this in my R Markdown file:</p>
<pre><code>Data wrangling with `tidyr`, which is part of the tidyverse. We are going to tidy some data!</code></pre>
</div>
<div id="load-tidyverse-which-has-tidyr-inside" class="section level3">
<h3><span class="header-section-number">7.2.2</span> load <code>tidyverse</code> (which has <code>tidyr</code> inside)</h3>
<p>First load <code>tidyr</code> in an R chunk. You already have installed the tidyverse, so you should be able to just load it like this (using the comment so you can run <code>install.packages(&quot;tidyverse&quot;)</code> easily if need be):</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(tidyverse) <span class="co"># install.packages(&quot;tidyverse&quot;)</span></code></pre></div>
</div>
</div>
<div id="explore-gapminder-data-wide-format." class="section level2">
<h2><span class="header-section-number">7.3</span> Explore gapminder data — wide format.</h2>
<p>Yesterday we started off with the gapminder data in a format that was already tidy. But what if it weren’t? Let’s look at a different version of those data.</p>
<p>The data are on GitHub. Navigate there by going to:</p>
<p>github.com &gt; ohi-science &gt; data-science-training &gt; data &gt; gapminder_wide.csv</p>
<p>or by copy-pasting this in the browser: <code>https://github.com/OHI-Science/data-science-training/blob/master/data/gapminder_wide.csv</code></p>
<p>Have a look at the data. You can see there are a lot more columns than the version we looked at before. This format is pretty common, because it can be a lot more intuitive to <em>enter</em> data in this way.</p>
<div class="figure">
<img src="img/gapminder_wide_gh.png" />

</div>
<p>But we want it to be in a tidy way so that we can work with it more easily. So here we go.</p>
</div>
<div id="gather-data-from-wide-to-long-format" class="section level2">
<h2><span class="header-section-number">7.4</span> <code>gather()</code> data from wide to long format</h2>
<img src="img/rstudio-cheatsheet-reshaping-data-gather.png" width="500"/>
<p>Read in the data from GitHub. Remember, you need to click on the ‘Raw’ button first so you can read it directly. Let’s also read in the gapminder data from yesterday so that we can use it to compare later on.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## wide format
gap_wide &lt;-<span class="st"> </span>readr::<span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder_wide.csv&#39;</span>)

## yesterday&#39;s format (intermediate)
gapminder &lt;-<span class="st"> </span>readr::<span class="kw">read_csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder.csv&#39;</span>)</code></pre></div>
<p>Let’s have a look:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(gap_wide)
<span class="kw">str</span>(gap_wide)</code></pre></div>
<p>While wide format is nice for data entry, it’s not nice for calculations. Some of the columns are a mix of variable (e.g. “gdpPercap”) and data (“1952”). What if you were asked for the mean population after 1990 in Algeria? Possible, but ugly. But we know it doesn’t need to be so ugly. Let’s tidy it back to the format we’ve been using.</p>
<blockquote>
<p>Question: let’s talk this through together. If we’re trying to turn the <code>gap_wide</code> format into <code>gapminder</code> format, what structure does it have that we like? And that we want to change?</p>
</blockquote>
<ul>
<li>We like the continent and country columns. We won’t want to change those.</li>
<li>For long format, we’d want just 1 column identifying the variable name (<code>tidyr</code> calls this a <strong>‘key’</strong>), and 1 column for the data (<code>tidyr</code> calls this the ’<strong>value’</strong>).</li>
<li>For intermediate format, we’d want 3 columns for <code>gdpPercap</code>, <code>lifeExp</code>, and <code>pop</code>.</li>
<li>We would like year as a separate column.</li>
</ul>
<p>Let’s get it to long format. We’ll have to do this in 2 steps. The first step is to take all of those column names (e.g. <code>lifeExp_1970</code>) and make them a variable in a new column, and transfer the values into another column. Let’s learn by doing:</p>
<p>Let’s have a look at <code>gather()</code>’s help:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">?gather</code></pre></div>
<blockquote>
<p>Question: What is our <strong>key-value pair</strong>?</p>
</blockquote>
<p>We need to name two new variables in the key-value pair, one for the key, one for the value. It can be hard to wrap your mind around this, so let’s give it a try. Let’s name them <code>obstype_year</code> and <code>obs_value</code>.</p>
<p>Here’s the start of what we’ll do:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gap_long &lt;-<span class="st"> </span>gap_wide %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key   =</span> obstype_year,
         <span class="dt">value =</span> obs_values)</code></pre></div>
<p>We got a warning message. This means that <code>gather()</code> worked, but maybe not how we wanted it to to.</p>
<p>Although we were already planning to inspect our work, let’s definitely do it now:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(gap_long)
<span class="kw">head</span>(gap_long)
<span class="kw">tail</span>(gap_long)</code></pre></div>
<p>So we have successfully reshaped our dataframe, but really not how we wanted. Very important to check, and listen to that warning message–dropping attributes seems very suspicious.</p>
<p>What went wrong? Notice that it didn’t know that we wanted to keep <code>continent</code> and <code>country</code> untouched; we need to give it more information about which columns we want reshaped. We can do this in several ways.</p>
<p>A good way: identify the columns by name. Listing them out by explicit name can be a good approach if there are a few. But there’s a lot here: over 30. But I’m not going to list them out here, and way too much potential for error if you tried gdpPercap_1952, gdpPercap_1957, gdpPercap_1962… But we could use some of <code>dplyr</code>’s awesome helper functions — because we expect that there is a better way to do this!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gap_long &lt;-<span class="st"> </span>gap_wide %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key   =</span> obstype_year,
         <span class="dt">value =</span> obs_values,
         dplyr::<span class="kw">starts_with</span>(<span class="st">&#39;pop&#39;</span>),
         dplyr::<span class="kw">starts_with</span>(<span class="st">&#39;lifeExp&#39;</span>),
         dplyr::<span class="kw">starts_with</span>(<span class="st">&#39;gdpPercap&#39;</span>))

<span class="kw">str</span>(gap_long)
<span class="kw">head</span>(gap_long)
<span class="kw">tail</span>(gap_long)</code></pre></div>
<p>Success! And there is another way that is nice to use if your columns don’t follow such a structured pattern: you can exclude the columns you <em>don’t</em> want.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gap_long &lt;-<span class="st"> </span>gap_wide %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key   =</span> obstype_year,
         <span class="dt">value =</span> obs_values,
         -continent, -country)

<span class="kw">str</span>(gap_long)
<span class="kw">head</span>(gap_long)
<span class="kw">tail</span>(gap_long)</code></pre></div>
<p>To recap:</p>
<p>Inside <code>gather()</code> we first name the new column for the new ID variable (<code>obstype_year</code>), the name for the new amalgamated observation variable (<code>obs_value</code>), then the names of the old observation variable. We could have typed out all the observation variables, but as in the <code>select()</code> function (see <code>dplyr</code> lesson), we can use the <code>starts_with()</code> argument to select all variables that starts with the desired character string. Gather also allows the alternative syntax of using the <code>-</code> symbol to identify which variables are not to be gathered (i.e. ID variables).</p>
<p>OK, but we’re not done yet. <code>obstype_year</code> actually contains two pieces of information, the observation type (<code>pop</code>,<code>lifeExp</code>, or <code>gdpPercap</code>) and the <code>year</code>. We can use the <code>separate()</code> function to split the character strings into multiple variables.</p>
<p><code>?separate</code> –&gt; the main arguments are <code>separate(data, col, into, sep ...)</code>. So we need to specify which column we want separated, name the new columns that we want to create, and specify what we want it to separate by. Since the <code>obstype_year</code> variable has observation types and years separated by a <code>_</code>, we’ll use that.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gap_long &lt;-<span class="st"> </span>gap_wide %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key   =</span> obstype_year,
         <span class="dt">value =</span> obs_values,
         -continent, -country) %&gt;%
<span class="st">  </span><span class="kw">separate</span>(obstype_year,
           <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&#39;obs_type&#39;</span>,<span class="st">&#39;year&#39;</span>),
           <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>)</code></pre></div>
<p>No warning messages…still we inspect:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(gap_long)
<span class="kw">head</span>(gap_long)
<span class="kw">tail</span>(gap_long)</code></pre></div>
<p>Excellent. This is long format: every row is a unique observation. Yay!</p>
<div id="your-turn-9" class="section level3">
<h3><span class="header-section-number">7.4.1</span> Your turn</h3>
<ol style="list-style-type: decimal">
<li><p>Using <code>gap_long</code>, calculate the mean life expectancy, population, and gdpPercap for each continent. <strong>Hint:</strong> use the <code>dplyr::group_by()</code> and <code>dplyr::summarize()</code> functions</p></li>
<li><p>What other helper functions can you use with <code>dplyr::select()</code>? Would any be useful in our example above? Why or why not?</p></li>
<li><p>Knit the R Markdown file and sync to Github (pull, stage, commit, push)</p></li>
</ol>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># solution (no peeking!)</span>
gap_long %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(continent, obs_type) %&gt;%
<span class="st">    </span><span class="kw">summarize</span>(<span class="dt">means =</span> <span class="kw">mean</span>(obs_values))</code></pre></div>
</div>
</div>
<div id="spread-data-from-long-to-intermediate-format" class="section level2">
<h2><span class="header-section-number">7.5</span> <code>spread()</code> data from long to intermediate format</h2>
<p>Alright! Now just to double-check our work, let’s use the opposite of <code>gather()</code> to spread our observation variables back to the original format with the aptly named <code>spread()</code>. You pass <code>spread()</code> the key and value pair, which is now <code>obs_type</code> and <code>obs_values</code>.</p>
<div class="figure">
<img src="img/rstudio-cheatsheet-reshaping-data-spread.png" />

</div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gap_normal &lt;-<span class="st"> </span>gap_long %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(obs_type, obs_values)</code></pre></div>
<p>No warning messages is good…but still let’s check:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">dim</span>(gap_normal)
<span class="kw">dim</span>(gapminder)
<span class="kw">names</span>(gap_normal)
<span class="kw">names</span>(gapminder)</code></pre></div>
<p>Now we’ve got an intermediate dataframe <code>gap_normal</code> with the same dimensions as the original <code>gapminder</code>, but the order of the variables is different. Let’s fix that before checking if they are <code>all.equal()</code>.</p>
<div id="your-turn-10" class="section level3">
<h3><span class="header-section-number">7.5.1</span> Your turn</h3>
<p>Reorder the columns in “gap_normal” to match “gapminder”.</p>
<div id="answer-no-peeking-1" class="section level4">
<h4><span class="header-section-number">7.5.1.1</span> Answer (no peeking!)</h4>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># one way with dplyr and %&gt;%</span>
gap_normal &lt;-<span class="st"> </span>gap_normal %&gt;%
<span class="st">  </span><span class="kw">select</span>(country, continent, year, lifeExp, pop, gdpPercap)

<span class="co"># another way with base R</span>
gap_normal &lt;-<span class="st"> </span>gap_normal[,<span class="kw">names</span>(gapminder)]</code></pre></div>
<p>Now let’s check if they are all.equal (<code>?all.equal</code>) is a handy test</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">all.equal</span>(gap_normal, gapminder)</code></pre></div>
<p>Hmm. Our <code>all.equal()</code> test didn’t pass. Let’s try to figure out why:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(gap_normal)
<span class="kw">head</span>(gapminder)</code></pre></div>
<p>Ah, they are ordered differently. We’re almost there, the original was ordered by <code>country</code>, <code>continent</code>, then <code>year</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gap_normal &lt;-<span class="st"> </span>gap_normal %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">arrange</span>(country, continent, year)

<span class="kw">all.equal</span>(gap_normal, gapminder)</code></pre></div>
<p>Better…</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(gap_normal)
<span class="kw">str</span>(gapminder)</code></pre></div>
<p>Mine currently shows that the in gapminder, “year” is an integer (int), but in gap_normal, “year” is a character. So let’s change that and see if that helps:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">gap_normal &lt;-<span class="st"> </span>gap_normal %&gt;%
<span class="st">  </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">as.integer</span>(year))

<span class="kw">all.equal</span>(gap_normal, gapminder)</code></pre></div>
<p>Hooray!</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">str</span>(gap_normal)
<span class="kw">str</span>(gapminder)</code></pre></div>
<p>(In the past, mine has shown a slight difference because one is a data.frame and one is a tbl_df, which is similar to a data.frame. We won’t get into this difference now, I’m feeling good about these data sets! We’ve gone from the longest format back to the intermediate and we didn’t introduce any errors in our code.)</p>
</div>
</div>
</div>
<div id="your-turn-11" class="section level2">
<h2><span class="header-section-number">7.6</span> Your turn</h2>
<ol style="list-style-type: decimal">
<li><p>Convert “gap_long” all the way back to gap_wide. Hint: you’ll need to create appropriate labels for all our new variables (time*metric combinations) with the opposite of separate: <code>tidyr::unite()</code>.</p></li>
<li><p>Knit the R Markdown file and sync to Github (pull, stage, commit, push)</p></li>
</ol>
<div id="answer-no-peeking-2" class="section level3">
<h3><span class="header-section-number">7.6.1</span> Answer (no peeking)</h3>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(gap_long) <span class="co"># remember the columns</span>

gap_wide_new &lt;-<span class="st"> </span>gap_long %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="co"># first unite obs_type and year into a new column called var_names. Separate by _</span>
<span class="st">  </span><span class="kw">unite</span>(<span class="dt">col =</span> var_names, obs_type, year, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="co"># then spread var_names out by key-value pair.</span>
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> var_names, <span class="dt">value =</span> obs_values)
<span class="kw">str</span>(gap_wide_new)</code></pre></div>
</div>
<div id="clean-up-and-save-your-.rmd" class="section level3">
<h3><span class="header-section-number">7.6.2</span> clean up and save your .Rmd</h3>
<p>Spend some time cleaning up and saving <code>gapminder-wrangle.Rmd</code> Restart R. In RStudio, use <em>Session &gt; Restart R</em>. Otherwise, quit R with <code>q()</code> and re-launch it.</p>
<p>This morning’s .Rmd could look something like this:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">## load tidyr (in tidyverse)
<span class="kw">library</span>(tidyverse) <span class="co"># install.packages(&quot;tidyverse&quot;)</span>

## load wide data
gap_wide &lt;-<span class="st"> </span><span class="kw">read.csv</span>(<span class="st">&#39;https://raw.githubusercontent.com/OHI-Science/data-science-training/master/data/gapminder_wide.csv&#39;</span>)

<span class="kw">head</span>(gap_wide)
<span class="kw">str</span>(gap_wide)

## practice tidyr::gather() wide to long
gap_long &lt;-<span class="st"> </span>gap_wide %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key   =</span> obstype_year,
         <span class="dt">value =</span> obs_values,
         -continent, -country) 
<span class="co"># or </span>
gap_long &lt;-<span class="st"> </span>gap_wide %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key   =</span> obstype_year,
         <span class="dt">value =</span> obs_values,
         dplyr::<span class="kw">starts_with</span>(<span class="st">&#39;pop&#39;</span>),
         dplyr::<span class="kw">starts_with</span>(<span class="st">&#39;lifeExp&#39;</span>),
         dplyr::<span class="kw">starts_with</span>(<span class="st">&#39;gdpPercap&#39;</span>))

## gather() and separate() to create our original gapminder
gap_long &lt;-<span class="st"> </span>gap_wide %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">gather</span>(<span class="dt">key   =</span> obstype_year,
         <span class="dt">value =</span> obs_values,
         -continent, -country) %&gt;%
<span class="st">  </span><span class="kw">separate</span>(obstype_year,
           <span class="dt">into =</span> <span class="kw">c</span>(<span class="st">&#39;obs_type&#39;</span>,<span class="st">&#39;year&#39;</span>),
           <span class="dt">sep=</span><span class="st">&quot;_&quot;</span>)

## practice: can still do calculations in long format
gap_long %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">group_by</span>(continent, obs_type) %&gt;%
<span class="st">  </span><span class="kw">summarize</span>(<span class="dt">means =</span> <span class="kw">mean</span>(obs_values))

## spread() from normal to wide
gap_normal &lt;-<span class="st"> </span>gap_long %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="kw">spread</span>(obs_type, obs_values) %&gt;%
<span class="st">  </span><span class="kw">select</span>(country, continent, year, lifeExp, pop, gdpPercap)

## check that all.equal()
<span class="kw">all.equal</span>(gap_normal,gapminder)

## unite() and spread(): convert gap_long to gap_wide
<span class="kw">head</span>(gap_long) <span class="co"># remember the columns</span>

gap_wide_new &lt;-<span class="st"> </span>gap_long %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="co"># first unite obs_type and year into a new column called var_names. Separate by _</span>
<span class="st">  </span><span class="kw">unite</span>(<span class="dt">col =</span> var_names, obs_type, year, <span class="dt">sep =</span> <span class="st">&quot;_&quot;</span>) %&gt;%<span class="st"> </span>
<span class="st">  </span><span class="co"># then spread var_names out by key-value pair.</span>
<span class="st">  </span><span class="kw">spread</span>(<span class="dt">key =</span> var_names, <span class="dt">value =</span> obs_values)
<span class="kw">str</span>(gap_wide_new)</code></pre></div>
</div>
<div id="complete-other-tidyr-awesomeness" class="section level3">
<h3><span class="header-section-number">7.6.3</span> <code>complete</code>: other <code>tidyr</code> awesomeness</h3>
<p>For this, let’s look at Jarrett Byrnes’ blog on the topic:</p>
<p><a href="http://www.imachordata.com/you-complete-me/" class="uri">http://www.imachordata.com/you-complete-me/</a></p>
<hr />
</div>
</div>
<div id="other-links" class="section level2">
<h2><span class="header-section-number">7.7</span> Other links</h2>
<ul>
<li><a href="http://ucsb-bren.github.io/env-info/wk04_tidyr.html">Tidying up Data - Env Info</a> - <a href="https://github.com/ucsb-bren/env-info/blob/gh-pages/wk04_tidyr.Rmd">Rmd</a></li>
<li><a href="http://bbest.github.io/dplyr-tidyr-tutorial/">Data wrangling with dplyr and tidyr - Tyler Clavelle &amp; Dan Ovando</a> - <a href="https://github.com/bbest/dplyr-tidyr-tutorial/blob/gh-pages/index.Rmd">Rmd</a></li>
</ul>

</div>
</div>
<script src="lib/js/jquery.min.js"></script>
<script src="lib/js/bootstrap.min.js"></script>
<script src="lib/js/lesson.js"></script>
            </section>

          </div>
        </div>
      </div>
<a href="data-wrangling-dplyr.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="programming.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"google": false,
"weibo": false,
"instapper": false,
"vk": false,
"all": ["facebook", "google", "twitter", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/OHI-Science/data-science-training/edit/master/tidyr.Rmd",
"text": "Edit"
},
"download": ["data-science-training.pdf"],
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
